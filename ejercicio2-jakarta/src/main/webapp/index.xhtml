<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="jakarta.faces.html"
      xmlns:f="jakarta.faces.core"
      xmlns:ui="jakarta.faces.facelets"
      xmlns:c="jakarta.tags.core">

<h:head>
    <title>Ejemplo02 usando JSF con Jakarta EE 10</title>
    <meta charset="UTF-8"/>
</h:head>

<h:body>
    <h1>Lista de usuarios:</h1>
    <ui:repeat value="#{helloBean.usuarios}" var="usuario">
        <h2>Usuario: #{usuario.nombre} #{usuario.apellidos}</h2>
        <ul>
            <li>
                Dni: #{usuario.dni}
            </li>
            <li>
                Email: #{usuario.email}
            </li>
            <li>
                Edad: #{usuario.edad}
            </li>
            <li>
                Pagos:
                <h:dataTable value="#{usuario.pagos}" var="pago">
                    <h:column>
                        <f:facet name="header">Mes</f:facet>
                        <h:outputText value="#{pago.key}" />
                    </h:column>
                    <h:column>
                        <f:facet name="header">Pago</f:facet>
                        <h:outputText value="#{pago.value} €" rendered="#{pago.value ne null}" />
                        <h:outputText value="NO PAGADO" rendered="#{pago.value eq null}" style="color:red;" />
                    </h:column>
                </h:dataTable>
            </li>
            <li>
                Total: #{usuario.calculateTotal()}
                <h:outputText value="El usuario no está al día con la cuota" rendered="#{usuario.calculateTotal() lt 100.0}" style="color:red;" />
                <h:outputText value="El usuario está al corriente de pagos" rendered="#{usuario.calculateTotal() ge 100.0}" style="color:green;" />
            </li>
        </ul>
    </ui:repeat>
</h:body>
</html>
